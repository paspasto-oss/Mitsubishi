<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cenov√° ponuka ‚Äì Tepeln√© ƒçerpadlo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Inter', sans-serif; }
    
    /* Vylep≈°en√© ≈°t√Ωly pre tlaƒç (podƒæa PDF predlohy) */
    @media print {
      @page {
        margin: 0cm;
        size: A4;
      }
      
      body { 
        print-color-adjust: exact !important; 
        -webkit-print-color-adjust: exact !important; 
        background-color: white !important;
        margin: 1.5cm; /* Okraje presne ako v PDF */
        color: #1f2937;
        font-size: 12px; /* Mierne zmen≈°enie p√≠sma pre compact look */
      }

      .no-print { display: none !important; }
      .print-reset-shadow { box-shadow: none !important; }
      .print-full-width { max-width: 100% !important; margin: 0 !important; }
      .print-border-none { border: none !important; }
      
      /* Hlaviƒçka */
      .header-row {
        display: flex !important;
        flex-direction: row !important;
        justify-content: space-between !important;
        align-items: flex-start !important;
        width: 100% !important;
        margin-bottom: 2rem !important;
      }
      
      .header-left { width: 50% !important; }
      .header-right { width: 50% !important; text-align: right !important; }

      /* Sekcie */
      h1 { font-size: 24px !important; margin-bottom: 5px !important; color: #111827 !important; }
      h2 { font-size: 14px !important; border: none !important; padding: 0 !important; margin-bottom: 15px !important; text-transform: uppercase; color: #374151 !important; font-weight: 800 !important; }
      h3 { font-size: 14px !important; margin-bottom: 10px !important; color: #111827 !important; }

      /* Tabuƒæky */
      th { background-color: white !important; color: #374151 !important; font-weight: 800 !important; border-bottom: 2px solid #e5e7eb !important; padding-top: 5px !important; padding-bottom: 5px !important; }
      td { padding-top: 6px !important; padding-bottom: 6px !important; border-bottom: 1px solid #f3f4f6 !important; }
      tfoot td { border-top: 2px solid #e5e7eb !important; border-bottom: none !important; padding-top: 10px !important; font-size: 14px !important; }

      /* Inteligentn√© l√°manie str√°n */
      tr { page-break-inside: avoid; } 
      .section-block { page-break-inside: avoid; margin-bottom: 20px; }
      
      /* Farby */
      .text-slate-300 { color: #6b7280 !important; } 
      .text-slate-400 { color: #4b5563 !important; }
      .text-red-400 { color: #ef4444 !important; }
      .bg-slate-800 { background-color: transparent !important; color: #111827 !important; }
      .text-white { color: #111827 !important; }
      
      /* Skrytie pozad√≠ sekci√≠ v tlaƒçi pre ƒçist√Ω vzhƒæad */
      .bg-gray-100 { background-color: white !important; padding: 0 !important; }
      .bg-white { background-color: white !important; box-shadow: none !important; }
      .p-8 { padding: 0 !important; }
      
      /* Projekt Info Grid */
      .project-info-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        margin-bottom: 2rem;
      }
      
      /* Zhrnutie na konci */
      .summary-container {
         display: flex;
         justify-content: space-between;
         margin-top: 2rem;
         page-break-inside: avoid;
      }
      .summary-left { width: 55%; }
      .summary-right { width: 40%; }

      /* Obr√°zok */
      .image-container {
        margin-top: 2rem;
        width: 100%;
        height: 300px;
        overflow: hidden;
      }
      .image-container img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
    }

    /* Web ≈°t√Ωly */
    .header-row { display: flex; justify-content: space-between; align-items: flex-start; gap: 24px; }
  </style>
</head>

<body class="bg-gray-100 p-4 md:p-8 text-slate-800">

  <div class="max-w-4xl mx-auto bg-white shadow-xl rounded-lg overflow-hidden print-reset-shadow print-full-width">

    <!-- Header -->
    <div class="bg-slate-800 text-white p-8 print:p-0 print:bg-white print:text-slate-900">
      <div class="header-row">
        <!-- ƒΩav√° strana -->
        <div class="header-left">
          <h1 class="text-3xl font-extrabold tracking-wide uppercase leading-none text-white print:text-slate-900">Cenov√° ponuka</h1>
          <div class="flex items-center gap-2 mt-2 mb-4">
             <span class="text-slate-200 font-semibold text-lg print:text-slate-700" id="offerNumberDisplay">2026/001</span>
             <span class="text-slate-400 text-sm font-medium print:text-slate-500">| Tepeln√© ƒçerpadlo</span>
          </div>
          
          <div class="text-xs text-slate-400 print:text-slate-600 space-y-1">
            <p>D√°tum vystavenia: <span id="date" class="text-slate-300 font-medium print:text-slate-900"></span></p>
            <p>Platnos≈• ponuky: 30 dn√≠</p>
          </div>

          <!-- Ovl√°dac√≠ panel (iba pre v√°s - web) -->
          <div class="no-print mt-8 p-4 bg-slate-700 rounded-lg border border-slate-600 shadow-inner">
            <div class="flex items-center gap-2 mb-3 border-b border-slate-600 pb-2">
                <span class="text-lg">üõ†</span>
                <h3 class="text-xs uppercase text-slate-200 font-bold">Editor ponuky</h3>
            </div>
            
            <div class="space-y-3">
               <div class="grid grid-cols-2 gap-3">
                 <div>
                    <label class="block text-[10px] text-slate-400 mb-1 uppercase">ƒå√≠slo ponuky</label>
                    <input type="text" id="offerNumberInput" class="w-full rounded bg-slate-800 border border-slate-500 text-white px-2 py-1 text-sm focus:border-red-400 outline-none" placeholder="2026/xxx" value="2026/001">
                 </div>
                 <div>
                    <label class="block text-[10px] text-slate-400 mb-1 uppercase">Technol√≥gia</label>
                    <select id="offerSelect" class="w-full rounded bg-slate-800 border border-slate-500 text-white px-2 py-1 text-sm focus:border-red-400 outline-none">
                      <option value="mitsubishi">Mitsubishi Zubadan 12 kW</option>
                      <option value="panasonic_split">Panasonic Aquarea K 9 kW</option>
                      <option value="hyundai_supreme_10">Hyundai Supreme 10 kW</option>
                      <option value="midea_split_12">Midea Split 12 kW</option>
                      <option value="midea_arctic_10">Midea Monoblok 10 kW</option>
                      <option value="midea_arctic_12">Midea Monoblok 12 kW</option>
                    </select>
                 </div>
               </div>

              <div>
                <label class="block text-[10px] text-slate-400 mb-1 uppercase">√ödaje o z√°kazn√≠kovi</label>
                <textarea id="customerInput" rows="3" class="w-full rounded bg-slate-800 border border-slate-500 text-white px-2 py-1 text-sm focus:border-red-400 outline-none resize-none" placeholder="Meno, Adresa...">V√°≈æen√Ω z√°kazn√≠k
Ulica 123
000 00 Mesto</textarea>
              </div>

              <button
                type="button"
                onclick="downloadPDF()"
                class="w-full mt-1 flex justify-center items-center gap-2 rounded bg-red-600 hover:bg-red-700 px-4 py-2 text-sm font-bold text-white shadow transition-all active:scale-[0.98]"
              >
                Stiahnu≈• PDF
              </button>
            </div>
          </div>
        </div>

        <!-- Prav√° strana: Firma -->
        <div class="header-right text-right">
          <div class="text-xl font-bold mb-1 tracking-tight text-white print:text-slate-900 uppercase">Spektra install s.r.o.</div>
          <div class="text-sm text-slate-300 space-y-1 print:text-slate-600 print:text-xs">
            <p>prev√°dzka Holl√©ho 210</p>
            <p>015 01 Rajec</p>
            <p class="mt-2 text-white font-medium print:text-slate-900 print:mt-1">spektrainstall@gmail.com</p>
            <p class="font-medium text-white print:text-slate-900">0917 572 221</p>
          </div>

          <!-- Z√ÅKAZN√çK (vpravo pod firmou v tlaƒçi, vƒæavo na webe je v editore) -->
          <div class="mt-8 text-left print:mt-12">
            <p class="text-[11px] uppercase text-slate-400 font-bold mb-1 tracking-widest print:text-slate-500 border-b border-slate-600 print:border-slate-300 inline-block pb-1">Z√ÅKAZN√çK / ODBERATEƒΩ</p>
            <div id="customerDisplay" class="text-sm font-semibold whitespace-pre-line text-white print:text-slate-900 leading-relaxed mt-1">V√°≈æen√Ω z√°kazn√≠k
Ulica 123
000 00 Mesto</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Project Info -->
    <div class="p-8 border-b border-gray-200 print:p-0 print:border-none print:mt-8 section-block">
      <h2 class="text-lg font-bold text-slate-700 mb-4 pl-0 print:text-slate-800 print:text-sm print:uppercase print:tracking-wide">Inform√°cie o projekte</h2>
      <div class="project-info-grid text-sm">
        <div>
          <p class="text-slate-500 text-[10px] uppercase font-bold tracking-wider mb-1">OBJEKT</p>
          <p class="font-bold text-slate-800 text-base mb-4">Rodinn√Ω dom</p>
          
          <p class="text-slate-500 text-[10px] uppercase font-bold tracking-wider mb-1">SYST√âM</p>
          <p class="font-bold text-slate-800 text-base">Vzduch / Voda</p>
        </div>
        <div>
          <p class="text-slate-500 text-[10px] uppercase font-bold tracking-wider mb-1">ZVOLEN√Å TECHNOL√ìGIA</p>
          <p class="font-bold text-slate-800 text-base mb-4"><span id="brandText">‚Äî</span></p>
          
          <p class="text-slate-500 text-[10px] uppercase font-bold tracking-wider mb-1">V√ùKON</p>
          <p class="font-bold text-slate-800 text-base"><span id="powerText">‚Äî</span></p>
        </div>
      </div>
    </div>

    <!-- Section 1: Tech -->
    <div class="p-8 print:p-0 print:mt-4 section-block">
      <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center print:text-sm print:uppercase print:tracking-wide">
        <span class="bg-slate-100 text-slate-600 rounded-full h-6 w-6 flex items-center justify-center mr-2 text-xs font-bold border border-slate-200 print:bg-slate-200 print:text-slate-800">1</span>
        Technol√≥gia ‚Äì Pr√©miov√© rie≈°enie
      </h3>

      <div class="print:border-t-2 print:border-slate-800">
        <table class="w-full text-sm text-left text-gray-600">
          <thead class="text-xs text-gray-700 uppercase print:text-slate-800">
            <tr>
              <th class="py-2 px-2 w-5/12">POLO≈ΩKA</th>
              <th class="py-2 px-2 w-3/12">TYP / MODEL</th>
              <th class="py-2 px-2 text-right font-bold w-2/12" id="listPriceHeader">CENN√çKOV√Å CENA</th>
              <th class="py-2 px-2 text-right font-bold w-2/12">VA≈†A CENA</th>
            </tr>
          </thead>
          <tbody id="techBody" class="divide-y divide-gray-100 print:divide-slate-200"></tbody>
          <tfoot class="print:border-t-2 print:border-slate-300">
            <tr>
              <td colspan="3" class="py-3 px-2 text-right text-slate-600 font-bold text-xs uppercase tracking-wide">Spolu za technol√≥giu:</td>
              <td class="py-3 px-2 text-right text-base font-bold text-slate-900" id="techTotal">0,00 ‚Ç¨</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>

    <!-- Section 2: Install -->
    <div class="px-8 pb-4 print:p-0 print:mt-4 section-block">
      <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center print:text-sm print:uppercase print:tracking-wide">
        <span class="bg-slate-100 text-slate-600 rounded-full h-6 w-6 flex items-center justify-center mr-2 text-xs font-bold border border-slate-200 print:bg-slate-200 print:text-slate-800">2</span>
        Profesion√°lna mont√°≈æ a in≈°tal√°cia
      </h3>

      <div class="print:border-t-2 print:border-slate-800">
        <table class="w-full text-sm text-left text-gray-600">
          <tbody class="divide-y divide-gray-100 print:divide-slate-200" id="installBody"></tbody>
          <tfoot class="print:border-t-2 print:border-slate-300">
            <tr>
              <td class="py-2 px-2 text-right font-bold text-xs uppercase tracking-wide">Spolu za mont√°≈æ:</td>
              <td class="py-2 px-2 text-right font-bold text-slate-900 w-2/12" id="installTotal">0,00 ‚Ç¨</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>

    <!-- Section 3: Services -->
    <div class="px-8 pb-8 print:p-0 print:mt-4 section-block">
      <h3 class="text-lg font-bold text-slate-800 mb-4 flex items-center print:text-sm print:uppercase print:tracking-wide">
        <span class="bg-slate-100 text-slate-600 rounded-full h-6 w-6 flex items-center justify-center mr-2 text-xs font-bold border border-slate-200 print:bg-slate-200 print:text-slate-800">3</span>
        Ostatn√© slu≈æby a servis
      </h3>

      <div class="print:border-t-2 print:border-slate-800">
        <table class="w-full text-sm text-left text-gray-600">
          <tbody class="divide-y divide-gray-100 print:divide-slate-200" id="servicesBody"></tbody>
          <tfoot class="print:border-t-2 print:border-slate-300">
            <tr>
              <td class="py-2 px-2 text-right font-bold text-xs uppercase tracking-wide">Spolu za slu≈æby:</td>
              <td class="py-2 px-2 text-right font-bold text-slate-900 w-2/12" id="servicesTotal">0,00 ‚Ç¨</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>

    <!-- Summary & Image -->
    <div class="bg-slate-50 p-8 border-t border-gray-200 print:p-0 print:bg-white print:border-none print:mt-8 section-block">
      
      <div class="summary-container">
        <!-- Notes -->
        <div class="summary-left">
          <h4 class="font-bold text-slate-800 mb-3 text-xs uppercase tracking-wide print:text-slate-900">Kƒæ√∫ƒçov√© v√Ωhody pre v√°s</h4>
          <ul class="text-sm text-slate-600 list-disc list-inside space-y-1 marker:text-red-400 print:text-slate-700" id="notesList"></ul>
          
          <div class="mt-2 text-xs text-red-600 font-bold italic" id="discountNote"></div>

          <div class="mt-6 text-xs text-slate-600 leading-relaxed print:text-slate-600">
            <p class="font-bold text-slate-900 mb-1 uppercase">Legislat√≠va E√ö (F-plyny):</p>
            <p>
              Prebieha postupn√© obmedzovanie chladiva <b>R32</b>. Trend smeruje k ekologick√Ωm chladiv√°m 
              <b>R290 (prop√°n)</b>. Odpor√∫ƒçame zv√°≈æi≈• tento faktor pri v√Ωbere zariadenia.
            </p>
          </div>
        </div>

        <!-- Total Price -->
        <div class="summary-right">
          <div class="bg-white p-4 rounded border border-gray-200 print:border-none print:p-0">
            <div class="flex justify-between py-1 text-slate-600 text-sm print:text-slate-800">
              <span class="font-semibold">Cena bez DPH:</span>
              <span class="font-medium" id="sumNoVat">0,00 ‚Ç¨</span>
            </div>
            <div class="flex justify-between py-1 text-slate-600 text-sm border-b border-gray-200 mb-2 pb-2 print:text-slate-800">
              <span class="font-semibold">DPH (20%):</span>
              <span class="font-medium" id="sumVat">0,00 ‚Ç¨</span>
            </div>
            <div class="flex justify-between items-end py-2 bg-slate-50 print:bg-white print:py-0">
              <span class="text-slate-900 font-extrabold uppercase">SPOLU s DPH:</span>
              <span class="text-xl font-black text-slate-900 tracking-tight" id="sumWithVat">0,00 ‚Ç¨</span>
            </div>

            <div class="mt-4 pt-4 border-t border-slate-200">
              <div class="flex justify-between text-green-700 text-sm mb-1 print:text-slate-800">
                <span>Mo≈æn√° dot√°cia:</span>
                <span class="font-bold" id="subsidyText">- 3 400,00 ‚Ç¨</span>
              </div>
              <div class="flex justify-between text-green-800 font-bold pt-1 print:text-slate-900">
                <span>Po odr√°tan√≠ dot√°cie:</span>
                <span id="afterSubsidy">~ 0,00 ‚Ç¨</span>
              </div>
              <p class="text-[10px] text-slate-500 mt-2 italic">* Dot√°cia "Zelen√° dom√°cnostiam" podlieha schv√°leniu SIEA.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- OBR√ÅZOK (Pohƒæad z okna) - Vypƒ∫≈àa spodok strany -->
      <div class="image-container print:block hidden md:block">
         <img 
           src="pohlad.jpg" 
           alt="Vizualiz√°cia" 
           onerror="this.style.display='none'" 
         />
      </div>

    </div>

    <!-- Footer -->
    <div class="bg-slate-800 text-slate-400 p-4 text-center text-xs print:bg-white print:text-slate-500 print:border-t print:border-slate-200 print:mt-4 print:pt-2">
      <p>T√°to cenov√° ponuka je nez√°v√§zn√°. Ceny s√∫ uveden√© vr√°tane recyklaƒçn√Ωch poplatkov.</p>
      <p class="print:mt-0 font-bold">¬© 2026 Spektra install s.r.o.</p>
    </div>

  </div>

<script>
  function downloadPDF() {
    window.print();
  }

  // --- LOGIKA ---
  const offerNumberInput = document.getElementById("offerNumberInput");
  const offerNumberDisplay = document.getElementById("offerNumberDisplay");
  const customerInput = document.getElementById("customerInput");
  const customerDisplay = document.getElementById("customerDisplay");
  const dateElement = document.getElementById('date');

  const today = new Date();
  const options = { year: 'numeric', month: 'long', day: 'numeric' };
  dateElement.textContent = today.toLocaleDateString('sk-SK', options);

  offerNumberInput.addEventListener("input", () => {
    offerNumberDisplay.textContent = offerNumberInput.value || "2026/001";
  });

  customerInput.addEventListener("input", () => {
    customerDisplay.textContent = customerInput.value;
  });

  const VAT_RATE = 0.20;
  const DEFAULT_SUBSIDY_EUR = 3400;

  const COMMON_INSTALL_BASE = [
    { label: "Odborn√° mont√°≈æ certifikovan√Ωm technikom (z√°ruka kvality)", price: 950 },
    { label: "Chladiarensk√© prepojenie (v√°kuovanie, sk√∫≈°ka tesnosti)", price: 380 },
    { label: "Profesion√°lne napojenie na vykurovac√≠ syst√©m domu", price: 320 },
    { label: "In≈°talaƒçn√Ω materi√°l (Cu potrubie, kauƒçukov√° izol√°cia, fitingy, kotvenie)", price: 650 },
    { label: "Elektroin≈°tal√°cia, istenie a komunikaƒçn√© prepojenie", price: 250 },
    { label: "Prestup stenou jadrov√Ωm v≈ïtan√≠m (ƒçist√Ω rez)", price: 65 },
    { label: "Spustenie, hydraulick√© vyv√°≈æenie a za≈°kolenie obsluhy", price: 180 }
  ];

  const OFFERS = {
    mitsubishi: {
      brand: "Mitsubishi Electric ‚Äì Zubadan",
      power: "10 ‚Äì 12 kW (ZUBADAN)",
      discountNote: "* Uplatnen√° mimoriadna zƒæava na technol√≥giu.",
      subsidy: 3400,
      notes: [
        "Technol√≥gia Flash Injection ‚Äì pln√Ω vykurovac√≠ v√Ωkon aj pri -15 ¬∞C.",
        "Japonsk√° spoƒæahlivos≈• s garanciou prev√°dzky a≈æ do -28 ¬∞C.",
        "Kompaktn√° vn√∫torn√° jednotka s nerezov√Ωm 200 l z√°sobn√≠kom.",
        "Ide√°lne pre radi√°tory aj podlahov√© vykurovanie."
      ],
      tech: [
        { name: "Vonkaj≈°ia jednotka ZUBADAN 12 kW (Vlajkov√° loƒè)", desc: "400 V, patentovan√° technol√≥gia vstrekovania", model: "PUD-SHWM120YAA", listPrice: 6535, yourPrice: 5100 },
        { name: "Hydrobox - Vn√∫torn√° jednotka All-in-One", desc: "Z√°sobn√≠k T√öV 200 l + z√°lo≈æn√Ω ohrev", model: "ERST20D-YM9D", listPrice: 6641, yourPrice: 5400 },
        { name: "Akumulaƒçn√° n√°doba 100 l (Buffer)", desc: "Hydraulick√° stabilita syst√©mu", model: "V 100 l", listPrice: 550, yourPrice: 420 },
        { name: "Inteligentn√° regul√°cia Mitsubishi (FTC)", desc: "Intuit√≠vne ovl√°danie", model: "GR√ÅTIS", listPrice: null, yourPrice: 0 }
      ],
      installBase: COMMON_INSTALL_BASE,
      services: [
        { label: "Presk√∫≈°anie syst√©mu a rev√≠zna spr√°va (pr√≠vod Tƒå)", price: 120 },
        { label: "Odvoz odpadu vzniknut√©ho pri in≈°tal√°cii", price: 60 }
      ]
    },

    panasonic_split: {
      brand: "Panasonic ‚Äì Aquarea K Series",
      power: "9 kW",
      discountNote: "",
      subsidy: 3400,
      notes: [
        "Najnov≈°ia gener√°cia K Series ‚Äì modern√Ω dizajn.",
        "Veƒæmi tich√° prev√°dzka ‚Äì vhodn√© do hustej z√°stavby.",
        "All-in-One rie≈°enie so 185 l nerezov√Ωm z√°sobn√≠kom.",
        "Smart Cloud: Ovl√°danie cez mobiln√∫ aplik√°ciu."
      ],
      tech: [
        { name: "Vonkaj≈°ia jednotka Panasonic Aquarea High P.", desc: "9 kW, 1-f√°za, tich√Ω re≈æim, R32", model: "WH-UDZ09KE5", listPrice: 4100, yourPrice: 3100 },
        { name: "Vn√∫torn√° jednotka All-in-One (s T√öV)", desc: "Z√°sobn√≠k 185 l, magnetick√Ω filter, Smart Cloud", model: "WH-ADC0309K3E5", listPrice: 6500, yourPrice: 4900 },
        { name: "Akumulaƒçn√° n√°doba 100 l (Buffer)", desc: "Hydraulick√° stabilita syst√©mu", model: "V 100 l", listPrice: 550, yourPrice: 420 }
      ],
      installBase: COMMON_INSTALL_BASE,
      services: [
        { label: "Presk√∫≈°anie syst√©mu a rev√≠zna spr√°va (pr√≠vod Tƒå)", price: 120 },
        { label: "Odvoz odpadu vzniknut√©ho pri in≈°tal√°cii", price: 60 }
      ]
    },
    
    hyundai_supreme_10: {
      brand: "Hyundai ‚Äì Supreme (Split)",
      power: "10 kW (230 V)",
      discountNote: "",
      subsidy: 3400,
      notes: [
        "Pr√©miov√Ω ƒçierny dizajn vonkaj≈°ej jednotky.",
        "Kompaktn√° vn√∫torn√° jednotka All-in-One so 190 l z√°sobn√≠kom.",
        "Integrovan√° elektrick√° ≈°pir√°la 3 kW a WiFi ovl√°danie.",
        "V√Ωborn√Ω pomer cena / v√Ωkon."
      ],
      tech: [
        { name: "Vonkaj≈°ia jednotka Hyundai Supreme 10 kW", desc: "ƒåierny dizajn, 1-f√°za, R32, invertor", model: "HPSO 10kW", listPrice: 4200, yourPrice: 3100 },
        { name: "Vn√∫torn√° jednotka All-in-One (s T√öV)", desc: "Z√°sobn√≠k 190 l, z√°lo≈æn√Ω ohrev 3kW", model: "HPSA 190L", listPrice: 4800, yourPrice: 3400 },
        { name: "Akumulaƒçn√° n√°doba 100 l (Buffer)", desc: "Hydraulick√° stabilita syst√©mu", model: "V 100 l", listPrice: 550, yourPrice: 420 }
      ],
      installBase: COMMON_INSTALL_BASE,
      services: [
        { label: "Presk√∫≈°anie syst√©mu a rev√≠zna spr√°va (pr√≠vod Tƒå)", price: 120 },
        { label: "Odvoz odpadu vzniknut√©ho pri in≈°tal√°cii", price: 60 }
      ]
    },

    midea_split_12: {
      brand: "Midea ‚Äì M-Thermal Arctic (Split)",
      power: "12 kW",
      discountNote: "",
      subsidy: 3400,
      notes: [
         "Osvedƒçen√° Split kon≈°trukcia (oddelen√© okruhy).",
         "Vn√∫torn√° jednotka 've≈æa' s integrovan√Ωm z√°sobn√≠kom T√öV.",
         "Vysok√° √∫ƒçinnos≈• vykurovania aj chladenia.",
         "Stabiln√Ω v√Ωkon a tich√° prev√°dzka."
      ],
      tech: [
        { name: "Vonkaj≈°ia jednotka Midea M-Thermal 12 kW", desc: "Split syst√©m, R32, invertor", model: "MHA-V12W", listPrice: 3900, yourPrice: 2900 },
        { name: "Vn√∫torn√° jednotka All-in-One", desc: "Integrovan√Ω z√°sobn√≠k T√öV, el. ≈°pir√°la", model: "HBT-A160", listPrice: 5600, yourPrice: 3600 },
        { name: "Akumulaƒçn√° n√°doba 100 l (Buffer)", desc: "Hydraulick√° stabilita syst√©mu", model: "V 100 l", listPrice: 550, yourPrice: 420 }
      ],
      installBase: COMMON_INSTALL_BASE,
      services: [
        { label: "Presk√∫≈°anie syst√©mu a rev√≠zna spr√°va (pr√≠vod Tƒå)", price: 120 },
        { label: "Odvoz odpadu vzniknut√©ho pri in≈°tal√°cii", price: 60 }
      ]
    },

    midea_arctic_10: {
      brand: "Midea ‚Äì Arctic R290 (monoblok)",
      power: "cca 10 kW",
      discountNote: "",
      subsidy: 3400,
      notes: [
        "Ekologick√© chladivo R290 (Prop√°n) ‚Äì bud√∫cnos≈• bez obmedzen√≠.",
        "Monoblok syst√©m ‚Äì voda v exteri√©ri, vy≈°≈°ia bezpeƒçnos≈• v dome.",
        "Vhodn√© pre rekon≈°trukcie (vysok√° teplota vody).",
        "Osvedƒçen√Ω z√°sobn√≠k Dra≈æice."
      ],
      tech: [
        { name: "Tepeln√© ƒçerpadlo Midea Arctic R290 10 kW", desc: "Invertor, vysok√° √∫ƒçinnos≈•, WiFi", model: "Arctic 10 kW", listPrice: 6500, yourPrice: 4600 },
        { name: "Z√°sobn√≠k T√öV Dra≈æice OKC 200 NTR/HP", desc: "Zv√§ƒç≈°en√° v√Ωhrevn√° plocha hada", model: "OKC 200", listPrice: 1150, yourPrice: 938.21 },
        { name: "Akumulaƒçn√° n√°doba 100 l (Buffer)", desc: "Hydraulick√° stabilita syst√©mu", model: "V 100 l", listPrice: 550, yourPrice: 420 }
      ],
      installBase: COMMON_INSTALL_BASE, 
      services: [
        { label: "Presk√∫≈°anie syst√©mu a rev√≠zna spr√°va (pr√≠vod Tƒå)", price: 120 },
        { label: "Odvoz odpadu vzniknut√©ho pri in≈°tal√°cii", price: 60 }
      ]
    },

    midea_arctic_12: {
      brand: "Midea ‚Äì Arctic R290 (monoblok)",
      power: "cca 12 kW",
      discountNote: "",
      subsidy: 3400,
      notes: [
        "Zv√Ω≈°en√Ω v√Ωkon 12 kW ‚Äì rezerva pre chladnej≈°ie dni.",
        "Ekologick√© a bezpeƒçn√© chladivo R290.",
        "Tich√° prev√°dzka vonkaj≈°ej jednotky.",
        "Kompletn√© rie≈°enie so z√°sobn√≠kom Dra≈æice."
      ],
      tech: [
        { name: "Tepeln√© ƒçerpadlo Midea Arctic R290 12 kW", desc: "Vysok√Ω v√Ωkon, WiFi ovl√°danie", model: "Arctic 12 kW", listPrice: 7500, yourPrice: 5100 },
        { name: "Z√°sobn√≠k T√öV Dra≈æice OKC 200 NTR/HP", desc: "Kvalitn√Ω smalt, zv√§ƒç≈°en√Ω v√Ωmenn√≠k", model: "OKC 200", listPrice: 1150, yourPrice: 938.21 },
        { name: "Akumulaƒçn√° n√°doba 100 l (Buffer)", desc: "Hydraulick√° stabilita syst√©mu", model: "V 100 l", listPrice: 550, yourPrice: 420 }
      ],
      installBase: COMMON_INSTALL_BASE,
      services: [
        { label: "Presk√∫≈°anie syst√©mu a rev√≠zna spr√°va (pr√≠vod Tƒå)", price: 120 },
        { label: "Odvoz odpadu vzniknut√©ho pri in≈°tal√°cii", price: 60 }
      ]
    }
  };

  const fmt = (n) => {
    const num = Number(n || 0);
    return num.toLocaleString("sk-SK", { minimumFractionDigits: 2, maximumFractionDigits: 2 }).replace(/\s/g, ' ') + " ‚Ç¨";
  };
  const sum = (arr) => arr.reduce((acc, x) => acc + (Number(x.price) || 0), 0);
  const techSum = (techRows) => techRows.reduce((acc, r) => acc + (Number(r.yourPrice) || 0), 0);

  function renderOffer(key) {
    const offer = OFFERS[key];

    document.getElementById("brandText").textContent = offer.brand;
    document.getElementById("powerText").textContent = offer.power;
    document.getElementById("discountNote").textContent = offer.discountNote || "";

    const techBody = document.getElementById("techBody");
    techBody.innerHTML = "";

    const showListPrice = offer.tech.some(r => typeof r.listPrice === "number");
    document.getElementById("listPriceHeader").textContent = showListPrice ? "CENN√çKOV√Å CENA" : "POZN√ÅMKA";

    offer.tech.forEach(r => {
      const tr = document.createElement("tr");
      // Pre tlaƒç odstr√°nime hover efekty
      
      const listCell = showListPrice
        ? (typeof r.listPrice === "number"
            ? `<td class="py-2 px-2 text-right text-slate-400 line-through decoration-red-300 text-xs w-2/12">${fmt(r.listPrice)}</td>`
            : `<td class="py-2 px-2 text-right text-slate-400 text-xs w-2/12">-</td>`
          )
        : `<td class="py-2 px-2 text-right text-slate-400 text-xs w-2/12">${r.desc ? " " : "-"}</td>`;

      tr.innerHTML = `
        <td class="py-2 px-2 font-medium text-slate-900 w-5/12">
          ${r.name}
          ${r.desc ? `<div class="text-xs text-slate-500 font-normal mt-0.5 print:text-slate-600">${r.desc}</div>` : ``}
        </td>
        <td class="py-2 px-2 text-slate-600 print:text-slate-800 w-3/12">${r.model || "-"}</td>
        ${listCell}
        <td class="py-2 px-2 text-right font-bold text-slate-900 w-2/12">${fmt(r.yourPrice)}</td>
      `;
      techBody.appendChild(tr);
    });

    const techTotal = techSum(offer.tech);
    document.getElementById("techTotal").textContent = fmt(techTotal);

    const installBody = document.getElementById("installBody");
    installBody.innerHTML = "";
    offer.installBase.forEach(r => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td class="py-2 px-2 w-3/4 text-slate-700 print:text-slate-900">${r.label}</td>
        <td class="py-2 px-2 text-right text-slate-900 font-medium w-2/12">${fmt(r.price)}</td>
      `;
      installBody.appendChild(tr);
    });
    const installTotal = sum(offer.installBase);
    document.getElementById("installTotal").textContent = fmt(installTotal);

    const servicesBody = document.getElementById("servicesBody");
    servicesBody.innerHTML = "";
    offer.services.forEach(r => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td class="py-2 px-2 w-3/4 text-slate-700 print:text-slate-900">${r.label}</td>
        <td class="py-2 px-2 text-right text-slate-900 font-medium w-2/12">${fmt(r.price)}</td>
      `;
      servicesBody.appendChild(tr);
    });
    const servicesTotal = sum(offer.services);
    document.getElementById("servicesTotal").textContent = fmt(servicesTotal);

    const notesList = document.getElementById("notesList");
    notesList.innerHTML = "";
    offer.notes.forEach(n => {
      const li = document.createElement("li");
      li.textContent = n;
      notesList.appendChild(li);
    });

    const totalNoVat = techTotal + installTotal + servicesTotal;
    const vat = totalNoVat * VAT_RATE;
    const totalWithVat = totalNoVat + vat;

    document.getElementById("sumNoVat").textContent = fmt(totalNoVat);
    document.getElementById("sumVat").textContent = fmt(vat);
    document.getElementById("sumWithVat").textContent = fmt(totalWithVat);

    const subsidy = Number(offer.subsidy ?? DEFAULT_SUBSIDY_EUR);
    document.getElementById("subsidyText").textContent = "- " + fmt(subsidy);
    const after = Math.max(0, totalWithVat - subsidy);
    document.getElementById("afterSubsidy").textContent = "~ " + fmt(after);
  }

  const sel = document.getElementById("offerSelect");
  sel.addEventListener("change", () => renderOffer(sel.value));
  renderOffer(sel.value);
</script>

</body>
</html>

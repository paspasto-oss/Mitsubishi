<!doctype html>
<html lang="sk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cenov√° ponuka ‚Äì Tepeln√© ƒçerpadlo | Spektra install</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --brand-red:#dc2626; /* red-600 */
      --brand-blue:#0f172a; /* slate-900-ish */
    }
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;}
    /* PRINT */
    @media print{
      @page{ size:A4; margin: 12mm; }
      body{
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
        background:#fff !important;
      }
      .no-print{display:none !important;}
      .print-no-shadow{box-shadow:none !important;}
      .print-full{max-width:100% !important; margin:0 !important;}
      /* dr≈æ hlaviƒçku vedƒæa seba */
      .hdr-row{display:flex !important; flex-direction:row !important; flex-wrap:nowrap !important;}
      .hdr-left{width:58% !important;}
      .hdr-right{width:42% !important;}
      /* nerozbi tabuƒæky */
      tr{page-break-inside:avoid;}
      .avoid-break{page-break-inside:avoid;}
    }
  </style>
</head>

<body class="bg-slate-100 p-4 md:p-8 text-slate-800">
  <div class="mx-auto max-w-4xl bg-white shadow-xl rounded-xl overflow-hidden print-no-shadow print-full">

    <!-- TOP BAR (tmavomodr√Ω p√°s + ƒçerven√Ω pruh vƒæavo) -->
    <header class="relative bg-slate-900 text-white p-8">
      <div class="absolute left-0 top-0 h-full w-2 bg-red-600"></div>

      <div class="hdr-row flex flex-col md:flex-row md:items-start md:justify-between gap-6">
        <!-- LEFT -->
        <div class="hdr-left">
          <h1 class="text-3xl font-extrabold tracking-wide uppercase leading-none">Cenov√° ponuka</h1>

          <div class="mt-2 flex flex-wrap items-center gap-2 text-sm">
            <span class="text-red-400 font-bold text-lg" id="offerNoView">2026/001</span>
            <span class="text-slate-300">Tepeln√© ƒçerpadlo</span>
            <span class="text-slate-400">‚Ä¢</span>
            <span class="text-slate-300" id="offerTitleView">Mitsubishi Electric ‚Äì Zubadan</span>
          </div>

          <div class="mt-4 text-xs text-slate-300/90">
            <p>D√°tum vystavenia: <span id="dateView" class="font-semibold text-white"></span></p>
            <p>Platnos≈• ponuky: 30 dn√≠</p>
          </div>

          <!-- CUSTOMER -->
          <div class="mt-7">
            <p class="text-[11px] uppercase tracking-[0.18em] font-bold text-slate-300/80 border-b border-slate-700 inline-block pb-1">
              Z√°kazn√≠k / Odberateƒæ
            </p>
            <div id="customerView" class="mt-2 whitespace-pre-line text-sm font-semibold leading-relaxed">
V√°≈æen√Ω z√°kazn√≠k
Ulica 123
000 00 Mesto
            </div>
          </div>

          <!-- EDITOR (screen only) -->
          <section class="no-print mt-8 rounded-lg border border-slate-700 bg-slate-800/60 p-4">
            <div class="flex items-center gap-2 pb-2 mb-3 border-b border-slate-700">
              <span class="text-lg">üõ†</span>
              <h2 class="text-xs uppercase tracking-wider font-bold text-slate-200">Editor ponuky</h2>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              <div>
                <label class="block text-[10px] uppercase tracking-wider text-slate-300 mb-1">ƒå√≠slo ponuky</label>
                <input id="offerNo" class="w-full rounded-md bg-slate-900 border border-slate-600 px-3 py-2 text-sm outline-none focus:border-red-400"
                       value="2026/001" />
              </div>

              <div>
                <label class="block text-[10px] uppercase tracking-wider text-slate-300 mb-1">Variant</label>
                <select id="offerSelect" class="w-full rounded-md bg-slate-900 border border-slate-600 px-3 py-2 text-sm outline-none focus:border-red-400">
                  <option value="mitsubishi_zubadan">Mitsubishi Zubadan 12 kW + T√öV 200 l</option>
                  <option value="panasonic_k_9">Panasonic Aquarea K 9 kW + T√öV</option>
                  <option value="midea_arctic_r290_10">Midea Arctic R290 10 kW (monoblok) + Dra≈æice 200 l</option>
                  <option value="midea_arctic_r290_12">Midea Arctic R290 12 kW (monoblok) + Dra≈æice 200 l</option>
                </select>
              </div>

              <div class="md:col-span-2">
                <label class="block text-[10px] uppercase tracking-wider text-slate-300 mb-1">√ödaje o z√°kazn√≠kovi</label>
                <textarea id="customerInput" rows="3"
                  class="w-full rounded-md bg-slate-900 border border-slate-600 px-3 py-2 text-sm outline-none focus:border-red-400 resize-none">V√°≈æen√Ω z√°kazn√≠k
Ulica 123
000 00 Mesto</textarea>
              </div>

              <div class="md:col-span-2 flex flex-col md:flex-row gap-2">
                <button onclick="window.print()"
                  class="inline-flex items-center justify-center rounded-md bg-red-600 hover:bg-red-700 px-4 py-2 text-sm font-bold shadow">
                  Stiahnu≈• PDF
                </button>
                <p class="text-[11px] text-slate-300 leading-snug md:self-center">
                  Pre ƒçist√© PDF vypni v dial√≥gu tlaƒçe <b>Hlaviƒçky a p√§ty</b> (inak sa uk√°≈æe URL/Netlify) a zapni <b>Tlaƒçi≈• pozadia</b>.
                </p>
              </div>
            </div>
          </section>
        </div>

        <!-- RIGHT -->
        <div class="hdr-right text-right">
          <div class="text-2xl font-bold tracking-tight">Spektra install s.r.o.</div>
          <div class="mt-2 text-sm text-slate-300 leading-relaxed">
            <div>prev√°dzka Holl√©ho 210</div>
            <div>015 01 Rajec</div>
            <div class="mt-2 font-semibold text-white">spektrainstall@gmail.com</div>
            <div class="font-semibold text-white">0917 572 221</div>
          </div>

          <!-- LOGO (vlo≈æ√≠≈° svoj ONE1.webp do rovnak√©ho prieƒçinka) -->
          <div class="mt-6 flex justify-end">
            <img src="ONE1.webp" alt="Logo Spektra Install"
              class="h-20 w-auto bg-white/5 p-2 rounded-md"
              onerror="this.style.display='none'" />
          </div>
        </div>
      </div>
    </header>

    <!-- INFO O PROJEKTE -->
    <section class="p-8 border-b border-slate-200">
      <div class="flex items-center gap-3 mb-4">
        <div class="h-10 w-2 bg-red-600 rounded-sm"></div>
        <h2 class="text-lg font-bold text-slate-800">Inform√°cie o projekte</h2>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm">
        <div>
          <div class="text-[10px] uppercase tracking-wider text-slate-500 font-bold">Objekt</div>
          <div class="mt-1 text-base font-semibold">Rodinn√Ω dom</div>

          <div class="mt-4 text-[10px] uppercase tracking-wider text-slate-500 font-bold">Syst√©m</div>
          <div class="mt-1 text-base font-semibold">Vzduch / Voda</div>
        </div>

        <div>
          <div class="text-[10px] uppercase tracking-wider text-slate-500 font-bold">Zvolen√° technol√≥gia</div>
          <div class="mt-1 text-base font-semibold" id="brandText">‚Äî</div>

          <div class="mt-4 text-[10px] uppercase tracking-wider text-slate-500 font-bold">V√Ωkon</div>
          <div class="mt-1 text-base font-semibold" id="powerText">‚Äî</div>
        </div>
      </div>
    </section>

    <!-- SEKCI√ÅLNY NADPIS helper: ƒçerven√Ω p√°s -->
    <template id="sectionTitleTpl">
      <div class="flex items-center gap-3 mb-4">
        <div class="h-10 w-2 bg-red-600 rounded-sm"></div>
        <h3 class="text-lg font-extrabold text-slate-800"></h3>
      </div>
    </template>

    <!-- 1 TECH -->
    <section class="p-8">
      <div id="secTechTitle"></div>

      <div class="overflow-hidden rounded-lg border border-slate-200">
        <table class="w-full text-sm">
          <thead class="bg-slate-50 text-xs uppercase tracking-wider text-slate-600 border-b border-slate-200">
            <tr>
              <th class="py-3 px-4 text-left w-5/12">Polo≈æka</th>
              <th class="py-3 px-4 text-left w-3/12">Typ / Model</th>
              <th class="py-3 px-4 text-right text-slate-400 font-medium" id="listHdr">Cenn√≠kov√° cena</th>
              <th class="py-3 px-4 text-right font-extrabold text-slate-900">Va≈°a cena</th>
            </tr>
          </thead>
          <tbody id="techBody" class="divide-y divide-slate-100"></tbody>
          <tfoot class="bg-slate-50 border-t border-slate-200">
            <tr>
              <td colspan="3" class="py-3 px-4 text-right font-semibold text-slate-600">Spolu za technol√≥giu:</td>
              <td class="py-3 px-4 text-right text-lg font-black text-slate-900" id="techTotal">0,00 ‚Ç¨</td>
            </tr>
          </tfoot>
        </table>
      </div>

      <div class="mt-2 text-right text-xs italic font-semibold text-red-600" id="discountNote"></div>
    </section>

    <!-- 2 MONT√Å≈Ω -->
    <section class="px-8 pb-8">
      <div id="secInstallTitle"></div>

      <div class="overflow-hidden rounded-lg border border-slate-200">
        <table class="w-full text-sm">
          <tbody id="installBody" class="divide-y divide-slate-100"></tbody>
          <tfoot class="bg-slate-50 border-t border-slate-200">
            <tr>
              <td class="py-3 px-4 text-right font-semibold text-slate-600">Spolu za mont√°≈æ:</td>
              <td class="py-3 px-4 text-right font-black text-slate-900" id="installTotal">0,00 ‚Ç¨</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </section>

    <!-- 3 SLU≈ΩBY -->
    <section class="px-8 pb-8">
      <div id="secServicesTitle"></div>

      <div class="overflow-hidden rounded-lg border border-slate-200">
        <table class="w-full text-sm">
          <tbody id="servicesBody" class="divide-y divide-slate-100"></tbody>
          <tfoot class="bg-slate-50 border-t border-slate-200">
            <tr>
              <td class="py-3 px-4 text-right font-semibold text-slate-600">Spolu za slu≈æby:</td>
              <td class="py-3 px-4 text-right font-black text-slate-900" id="servicesTotal">0,00 ‚Ç¨</td>
            </tr>
          </tfoot>
        </table>
      </div>
    </section>

    <!-- SUMMARY -->
    <section class="bg-slate-50 border-t border-slate-200 p-8">
      <div class="flex flex-col md:flex-row gap-8">
        <div class="w-full md:w-1/2">
          <div class="flex items-center gap-3 mb-3">
            <div class="h-10 w-2 bg-red-600 rounded-sm"></div>
            <h4 class="text-sm uppercase tracking-wider font-extrabold text-slate-800">Pozn√°mky</h4>
          </div>

          <ul id="notesList" class="text-sm text-slate-700 list-disc list-inside space-y-2"></ul>

          <div class="mt-6 rounded-lg border border-slate-200 bg-white p-4 text-xs text-slate-700">
            <div class="font-extrabold text-slate-900 mb-1">Pozn√°mka k chladiv√°m (E√ö):</div>
            <div>
              Prebieha postupn√© spr√≠s≈àovanie pravidiel pre F-plyny. Pri nov√Ωch projektoch odpor√∫ƒçame
              preferova≈• rie≈°enia s <b>R290 (prop√°n)</b>. Chladivo <b>R32</b> je postupne obmedzovan√© a trend smeruje k R290.
            </div>
          </div>
        </div>

        <div class="w-full md:w-1/2">
          <div class="rounded-xl border border-slate-200 bg-white p-6">
            <div class="flex justify-between py-1 text-sm text-slate-600">
              <span>Cena bez DPH:</span>
              <span class="font-semibold" id="sumNoVat">0,00 ‚Ç¨</span>
            </div>
            <div class="flex justify-between py-1 text-sm text-slate-600 border-b border-slate-100 mb-2 pb-2">
              <span>DPH (20%):</span>
              <span class="font-semibold" id="sumVat">0,00 ‚Ç¨</span>
            </div>
            <div class="flex justify-between items-end py-2">
              <span class="text-lg font-extrabold text-slate-900">SPOLU s DPH:</span>
              <span class="text-2xl font-black text-slate-900" id="sumWithVat">0,00 ‚Ç¨</span>
            </div>

            <div class="mt-4 rounded-lg border border-emerald-200 bg-emerald-50 p-4">
              <div class="flex justify-between text-sm text-emerald-800">
                <span>Mo≈æn√° dot√°cia:</span>
                <span class="font-extrabold" id="subsidyText">- 3 400,00 ‚Ç¨</span>
              </div>
              <div class="mt-2 pt-2 border-t border-emerald-200 flex justify-between font-extrabold text-emerald-900">
                <span>Po odr√°tan√≠ dot√°cie:</span>
                <span id="afterSubsidy">~ 0,00 ‚Ç¨</span>
              </div>
              <div class="mt-1 text-[10px] text-emerald-700 italic">* Dot√°cia ‚ÄûZelen√° dom√°cnostiam‚Äú podlieha schv√°leniu SIEA.</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-slate-900 text-slate-300 text-xs text-center p-4">
      T√°to cenov√° ponuka je nez√°v√§zn√°. Ceny s√∫ uveden√© vr√°tane recyklaƒçn√Ωch poplatkov. ¬© 2026 Spektra install s.r.o.
    </footer>
  </div>

<script>
  // ========== DATA ==========
  const VAT = 0.20;
  const DEFAULT_SUBSIDY = 3400;

  // Mont√°≈æ (zjednoten√° polo≈æka materi√°lu ‚Äì ako si chcel)
  const COMMON_INSTALL = [
    { label: "Odborn√° mont√°≈æ certifikovan√Ωm technikom (z√°ruka kvality)", price: 950 },
    { label: "Chladiarensk√© prepojenie (v√°kuovanie, sk√∫≈°ka tesnosti)", price: 380 },
    { label: "Profesion√°lne napojenie na vykurovac√≠ syst√©m domu", price: 320 },
    { label: "Mont√°≈æny materi√°l (voda/k√∫renie + Cu potrubie + kauƒçukov√° izol√°cia + fitingy + kotvenie)", price: 650 },
    { label: "Elektroin≈°tal√°cia, istenie a komunikaƒçn√© prepojenie", price: 250 },
    { label: "Prestup stenou jadrov√Ωm v≈ïtan√≠m (ƒçist√Ω rez)", price: 65 },
    { label: "Spustenie, hydraulick√© vyv√°≈æenie a za≈°kolenie obsluhy", price: 180 },
  ];

  const SERVICE_PROTOCOL = { label: "Protokol o uveden√≠ do prev√°dzky (kontrola + spustenie)", price: 120 };

  const OFFERS = {
    mitsubishi_zubadan: {
      title: "Mitsubishi Electric ‚Äì Zubadan",
      brand: "Mitsubishi Electric ‚Äì Zubadan",
      power: "10 ‚Äì 12 kW (ZUBADAN)",
      discountNote: "* Uplatnen√° mimoriadna zƒæava na technol√≥giu.",
      subsidy: 3400,
      notes: [
        "Flash Injection ‚Äì pln√Ω v√Ωkon pri -15 ¬∞C.",
        "Garantovan√° prev√°dzka a≈æ do -28 ¬∞C.",
        "Vhodn√© pre radi√°tory aj podlahov√© k√∫renie.",
        "Kompaktn√° vn√∫torn√° jednotka so z√°sobn√≠kom T√öV.",
      ],
      tech: [
        { name:"Vonkaj≈°ia jednotka ZUBADAN 12 kW", desc:"400 V, garantovan√Ω v√Ωkon do -15 ¬∞C", model:"PUD-SHWM120YAA", list:6535, your:4990 },
        { name:"Hydrobox (vn√∫torn√° jednotka) + T√öV", desc:"Z√°sobn√≠k T√öV 200 l", model:"ERST20D-YM9D", list:6841, your:5290 },
        { name:"Regul√°cia Mitsubishi (FTC)", desc:"S√∫ƒças≈• setu", model:"S√∫ƒças≈• setu", list:null, your:0 },
      ],
      install: COMMON_INSTALL,
      services: [ SERVICE_PROTOCOL, { label:"Odvoz odpadu vzniknut√©ho pri in≈°tal√°cii", price:60 } ],
    },

    panasonic_k_9: {
      title: "Panasonic ‚Äì Aquarea K 9 kW",
      brand: "Panasonic ‚Äì Aquarea K Series",
      power: "9 kW",
      discountNote: "",
      subsidy: 3400,
      notes: [
        "Tich√° prev√°dzka ‚Äì vhodn√© do hustej z√°stavby.",
        "Modern√© ovl√°danie a dobr√° √∫ƒçinnos≈•.",
        "Vhodn√© pre rekon≈°trukcie aj novostavby.",
      ],
      tech: [
        { name:"Vonkaj≈°ia jednotka Panasonic Aquarea 9 kW", desc:"Split, R32", model:"WH-UDZ09KE5", list:4100, your:3100 },
        { name:"Vn√∫torn√° jednotka (s T√öV)", desc:"All-in-one / so z√°sobn√≠kom", model:"WH-ADC0309K3E5", list:6500, your:4900 },
      ],
      install: COMMON_INSTALL,
      services: [ SERVICE_PROTOCOL, { label:"Odvoz odpadu vzniknut√©ho pri in≈°tal√°cii", price:60 } ],
    },

    midea_arctic_r290_10: {
      title: "Midea Arctic R290 ‚Äì monoblok 10 kW",
      brand: "Midea ‚Äì Arctic R290 (monoblok)",
      power: "cca 10 kW",
      discountNote: "",
      subsidy: 3400,
      notes: [
        "R290 (prop√°n) ‚Äì perspekt√≠vne chladivo bez trendu obmedzovania.",
        "Monoblok ‚Äì bez chladiva v interi√©ri (hydraulika do domu).",
        "Dra≈æice z√°sobn√≠k urƒçen√Ω pre tepeln√© ƒçerpadl√°.",
        "Mo≈ænos≈• vy≈°≈°ej teploty vody pre radi√°tory (podƒæa n√°vrhu).",
      ],
      tech: [
        { name:"Tepeln√© ƒçerpadlo Midea Arctic R290 10 kW", desc:"Monoblok, invertor, WiFi", model:"Arctic 10 kW", list:6500, your:4600 },
        { name:"Z√°sobn√≠k T√öV Dra≈æice OKC 200 NTR/HP", desc:"Z√°sobn√≠k pre Tƒå, 200 l", model:"OKC 200 NTR/HP", list:1150, your:938.21 },
        { name:"Akumulaƒçn√° n√°doba 100 l", desc:"Stabilnej≈°√≠ chod syst√©mu", model:"100 l", list:null, your:520 },
      ],
      install: COMMON_INSTALL,
      services: [ SERVICE_PROTOCOL, { label:"Odvoz odpadu vzniknut√©ho pri in≈°tal√°cii", price:60 } ],
    },

    midea_arctic_r290_12: {
      title: "Midea Arctic R290 ‚Äì monoblok 12 kW",
      brand: "Midea ‚Äì Arctic R290 (monoblok)",
      power: "cca 12 kW",
      discountNote: "",
      subsidy: 3400,
      notes: [
        "Rezerva v√Ωkonu pre chladnej≈°ie dni.",
        "R290 ‚Äì ekologick√© chladivo, trend do bud√∫cna.",
        "Kompletn√© rie≈°enie so z√°sobn√≠kom a AKU n√°dobou.",
      ],
      tech: [
        { name:"Tepeln√© ƒçerpadlo Midea Arctic R290 12 kW", desc:"Monoblok, invertor, WiFi", model:"Arctic 12 kW", list:7500, your:5100 },
        { name:"Z√°sobn√≠k T√öV Dra≈æice OKC 200 NTR/HP", desc:"Z√°sobn√≠k pre Tƒå, 200 l", model:"OKC 200 NTR/HP", list:1150, your:938.21 },
        { name:"Akumulaƒçn√° n√°doba 100 l", desc:"Stabilnej≈°√≠ chod syst√©mu", model:"100 l", list:null, your:520 },
      ],
      install: COMMON_INSTALL,
      services: [ SERVICE_PROTOCOL, { label:"Odvoz odpadu vzniknut√©ho pri in≈°tal√°cii", price:60 } ],
    },
  };

  // ========== HELPERS ==========
  const fmt = (n) => Number(n||0).toLocaleString("sk-SK",{minimumFractionDigits:2,maximumFractionDigits:2})+" ‚Ç¨";
  const sumPrices = (arr) => arr.reduce((a,x)=>a+(Number(x.price)||0),0);
  const sumTech = (arr) => arr.reduce((a,x)=>a+(Number(x.your)||0),0);

  function sectionTitle(targetId, title){
    const tpl = document.getElementById("sectionTitleTpl");
    const node = tpl.content.cloneNode(true);
    node.querySelector("h3").textContent = title;
    const target = document.getElementById(targetId);
    target.innerHTML = "";
    target.appendChild(node);
  }

  // ========== RENDER ==========
  function render(key){
    const o = OFFERS[key];

    // headers
    document.getElementById("offerTitleView").textContent = o.title;
    document.getElementById("brandText").textContent = o.brand;
    document.getElementById("powerText").textContent = o.power;
    document.getElementById("discountNote").textContent = o.discountNote || "";

    // section titles
    sectionTitle("secTechTitle","Technol√≥gia");
    sectionTitle("secInstallTitle","Mont√°≈æ a in≈°tal√°cia");
    sectionTitle("secServicesTitle","Ostatn√© slu≈æby");

    // tech table
    const techBody = document.getElementById("techBody");
    techBody.innerHTML = "";
    const showList = o.tech.some(x => typeof x.list === "number");
    document.getElementById("listHdr").textContent = showList ? "Cenn√≠kov√° cena" : "Pozn√°mka";

    o.tech.forEach(row=>{
      const tr = document.createElement("tr");
      tr.className = "hover:bg-slate-50";
      const listCell = showList
        ? (typeof row.list === "number"
            ? `<td class="py-3 px-4 text-right text-slate-400 line-through decoration-red-300 text-xs">${fmt(row.list)}</td>`
            : `<td class="py-3 px-4 text-right text-slate-400 text-xs">-</td>`
          )
        : `<td class="py-3 px-4 text-right text-slate-400 text-xs">${row.desc ? "" : "-"}</td>`;

      tr.innerHTML = `
        <td class="py-3 px-4 font-semibold text-slate-900">
          ${row.name}
          ${row.desc ? `<div class="text-xs font-normal text-slate-500 mt-0.5">${row.desc}</div>` : ``}
        </td>
        <td class="py-3 px-4 text-slate-700">${row.model || "-"}</td>
        ${listCell}
        <td class="py-3 px-4 text-right font-extrabold text-emerald-700">${fmt(row.your)}</td>
      `;
      techBody.appendChild(tr);
    });

    const techTotal = sumTech(o.tech);
    document.getElementById("techTotal").textContent = fmt(techTotal);

    // install
    const instBody = document.getElementById("installBody");
    instBody.innerHTML = "";
    o.install.forEach(r=>{
      const tr = document.createElement("tr");
      tr.className = "hover:bg-slate-50";
      tr.innerHTML = `
        <td class="py-3 px-4 text-slate-800">${r.label}</td>
        <td class="py-3 px-4 text-right font-semibold text-slate-900">${fmt(r.price)}</td>
      `;
      instBody.appendChild(tr);
    });
    const instTotal = sumPrices(o.install);
    document.getElementById("installTotal").textContent = fmt(instTotal);

    // services
    const srvBody = document.getElementById("servicesBody");
    srvBody.innerHTML = "";
    o.services.forEach(r=>{
      const tr = document.createElement("tr");
      tr.className = "hover:bg-slate-50";
      tr.innerHTML = `
        <td class="py-3 px-4 text-slate-800">${r.label}</td>
        <td class="py-3 px-4 text-right font-semibold text-slate-900">${fmt(r.price)}</td>
      `;
      srvBody.appendChild(tr);
    });
    const srvTotal = sumPrices(o.services);
    document.getElementById("servicesTotal").textContent = fmt(srvTotal);

    // notes
    const notes = document.getElementById("notesList");
    notes.innerHTML = "";
    (o.notes||[]).forEach(t=>{
      const li = document.createElement("li");
      li.textContent = t;
      notes.appendChild(li);
    });

    // totals
    const noVat = techTotal + instTotal + srvTotal;
    const vat = noVat * VAT;
    const withVat = noVat + vat;

    document.getElementById("sumNoVat").textContent = fmt(noVat);
    document.getElementById("sumVat").textContent = fmt(vat);
    document.getElementById("sumWithVat").textContent = fmt(withVat);

    const sub = Number(o.subsidy ?? DEFAULT_SUBSIDY);
    document.getElementById("subsidyText").textContent = "- " + fmt(sub);
    document.getElementById("afterSubsidy").textContent = "~ " + fmt(Math.max(0, withVat - sub));
  }

  // ========== INPUTS ==========
  const offerNo = document.getElementById("offerNo");
  const offerNoView = document.getElementById("offerNoView");
  const customerInput = document.getElementById("customerInput");
  const customerView = document.getElementById("customerView");
  const offerSelect = document.getElementById("offerSelect");

  offerNo.addEventListener("input", ()=> offerNoView.textContent = offerNo.value || "2026/001");
  customerInput.addEventListener("input", ()=> customerView.textContent = customerInput.value);
  offerSelect.addEventListener("change", ()=> render(offerSelect.value));

  // date
  const d = new Date();
  document.getElementById("dateView").textContent = d.toLocaleDateString("sk-SK",{year:"numeric",month:"long",day:"numeric"});

  // first render
  render(offerSelect.value);
</script>
</body>
</html>
